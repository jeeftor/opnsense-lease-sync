{% if helpers.exists('OPNsense.dhcpsync.general.Enabled') and OPNsense.dhcpsync.general.Enabled == '1' %}
# AdGuard Home credentials
ADGUARD_USERNAME="{{ OPNsense.dhcpsync.general.AdguardHomeUsername }}"
ADGUARD_PASSWORD="{{ OPNsense.dhcpsync.general.AdguardHomePassword }}"

# AdGuard Home connection settings
{% if helpers.exists('OPNsense.dhcpsync.general.AdguardHomeURL') %}
{% set url = OPNsense.dhcpsync.general.AdguardHomeURL.split('://') %}
{% if url|length > 1 %}
ADGUARD_SCHEME="{{ url[0] }}"
ADGUARD_URL="{{ url[1] }}"
{% else %}
ADGUARD_SCHEME="http"
ADGUARD_URL="{{ OPNsense.dhcpsync.general.AdguardHomeURL }}"
{% endif %}
{% endif %}

# DHCP lease file configuration
{% if helpers.exists('OPNsense.dhcpsync.general.DHCPServer') %}
LEASE_FORMAT="{{ OPNsense.dhcpsync.general.DHCPServer }}"
{% if OPNsense.dhcpsync.general.DHCPServer == 'dnsmasq' %}
DHCP_LEASE_PATH="/var/db/dnsmasq.leases"
{% elif OPNsense.dhcpsync.general.DHCPServer == 'isc' %}
DHCP_LEASE_PATH="/var/dhcpd/var/db/dhcpd.leases"
{% endif %}
{% endif %}

# Optional settings
#PRESERVE_DELETED_HOSTS="false"
#DEBUG="false"
#DRY_RUN="false"
ADGUARD_TIMEOUT="10"

# Logging configuration - Direct file logging
LOG_LEVEL="info"
LOG_FILE="/var/log/dhcpsync.log"
MAX_LOG_SIZE="100"
MAX_BACKUPS="3"
MAX_AGE="28"
#NO_COMPRESS="false"
{% endif %}
